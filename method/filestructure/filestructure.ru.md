# Организация файловой структуры

Принятый в методологии БЭМ компонентный подход применяется к организации файловой структуры БЭМ-проектов. Реализация блока делится на независимые файлы, называемые также исходными файлами. Разветвленная файловая структура предполагает, что в production-режиме код будет собираться в общие файлы проекта — бандлы. По-фаловая разработка блока позволяет включать в сборку только необходимые части, точечно вносить правки в проект и повторно использовать код.

Файловая структура любого БЭМ-проекта формируется по общим принципам, сформулированным в БЭМ-методологии. Поэтому большинство БЭМ-проектов похожи по структуре. Такой подход упростить навигацию про проекту, ускорить разработку и отладку проекта, обеспечить легкое переключение людей между проектами.

Существует три основные схемы файловой структуры БЭМ-проекта, которые незначительно отличаются между собой: 

* nested
* flat
* flex 

Выбор схемы зависит от личных предпочтений разработчика.

Схема nested принята методологией как классическая и используется для организации файловой структуры БЭМ-библиотек:

* [bem-core](https://github.com/bem/bem-core/tree/v4.2.1/common.blocks/page)
* [bem-components](https://github.com/bem/bem-components/tree/v6.0.0/common.blocks/button)

## Особенности классической файловой структуры БЭМ-проекта (схема nested):

* Блоку соответствует одна директория.
* Имена блока и его директории совпадают. Например, блок `header` — директория `header/`.
* Реализация блока разделяется на исходные файлы для каждой технологии. Например, `header.css`, `header.js`.
* Реализации модификаторов и опциональных элементов находятся в отдельных файлах. Например, `header__input.js`, `header_theme_islands.css`.
* Файлы модификаторов и опциональных элементов хранится в отдельных директориях.
* Директория блока является корневой для поддиректорий его элементов и модификаторов.
* Имена директорий элементов начинаются с двойного подчеркивания (`__`). Например, `header/__logo/`, `menu/__item/`.
* Имена директорий модификаторов начинаются с одинарного подчеркивания (`_`). Например, `header/_fixed/`, `menu/_theme_islands/`.

Пример nested схемы:

```files
search-form/                           # Директория блока search-form

    __input/                           # Поддиректория элемента search-form__input
        search-form__input.css         # Реализация элемента search-form__input
                                       # в технологии CSS
        search-form__input.js          # Реализация элемента search-form__input
                                       # в технологии JavaScript

    __button/                          # Поддиректория элемента search-form__button
        search-form__button.css
        search-form__button.js

    _theme/                            # Поддиректория модификатора
                                       # search-form_theme
        search-form_theme_islands.css  # Реализация блока search-form, имеющего
                                       # модификатор theme со значением islands
                                       # в технологии CSS
        search-form_theme_lite.css     # Реализация блока search-form, имеющего
                                       # модификатор theme со значением lite
                                       # в технологии CSS

    search-form.css                    # Реализация блока search-form
                                       # в технологии CSS
    search-form.js                     # Реализация блока search-form
                                       # в технологии JavaScript
```

## Приципы организации файловой стуктуры БЭМ-проекта 

Хранение кода в БЭМ-проекте подчиняется основным приципам организации файловой стуктуры: 

* [Проект состоит из уровней переопределения](#Проект-разделяется-на-уровни-переопределения)
* [Реализация блока разделяется на отдельные файлы](#Реализация-блока-разделяется-на-отдельные-файлы)
* [Файлы объединяются по смыслу, а не по типу](#Файлы-объединяются-по-смыслу-а-не-по-типу)

### Проект состоит из уровней переопределения

Любой БЭМ-проект состоит из [уровней переопределения](../key-concepts/key-concepts.ru.md#Уровень-переопределения). Минимальное количество уровней в проекте — один, максимальное – не ограничено.

В фаловой структруре проекта уровень — это директория с файлами реализаций блоков, элементов и модификаторов.

```files
project/
    common.blocks/                             # уровень переопределения с блоками проекта
    library.blocks/                            # уровень переопределения c блоками библиотеки
```

### Реализация блока состоит из отдельных файлов

[Технологии](../key-concepts/key-concepts.ru.md#Технология-реализации), которые используются для создания блока, определяют набор файлов этого блока в файловой структуре.

> **Важно!** Имена блоков, элементов и модификаторов и их файлов реализаций совпадают.

Каждой технологии реализации блока соответствует отдельный файл. Например, если внешний вид блока `button` задан с помощью CSS, то код будет сохранен в файле `button.css`.

**Пример**

```files
project
    common.blocks/
        input.css                              # Реализация блока `input` в технологии CSS
        input.js                               # Реализация блока `input` в технологии JavaScript
```

Код, описывающий опциональные элементы и модификаторы, хранится в файловой системе независимо — в отдельных файлах блока. При сборке используются только те модификаторы и элементы, которые необходимы для данной реализации блока. 

**Пример**

```files
project
    common.blocks/
        input/                                 # Директория блока input
            input.css                          # Реализация блока input в технологии CSS
            input.js                           # Реализация блока input в технологии JavaScript
            input_theme_sun.css                # Реализация модификатора theme в значении sun
            input__clear.css                   # Реализация элемента clear в технологии CSS
            input__clear.js                    # Реализация элемента clear в технологии JavaScript
``` 

### Файлы объединяются по смыслу, а не по типу

Имя блока в БЭМ-проекте уникально. Имена блока и его файлов реализаций совпадают. Таким образом файлы блока группируются с помощью общих [правил именования](../naming-convention/naming-convention.ru.md) БЭМ-сущностей. Для удобства работы файлы могут быть объединены в директорию блока.

**Пример**

```files
project
    common.blocks/
        input/                                 # Директория блока input
            input.css                          # Реализация блока input в технологии CSS
            input.js                           # Реализация блока input в технологии JavaScript
        popup/                                 # Директория блока popup
            popup.css                          # Реализация блока popup в технологии CSS 
            popup.js                           # Реализация блока popup в технологии JavaScript
```

## Альтернативные схемы 

### Flat

Особенности:

* Директории для блоков не используются.
* Опциональные элементы и модификаторы реализованы в отдельных файлах.

```files
project
    common.blocks/
        input_type_search.css                  # Модификатор type блока input в технологии CSS
        input_type_search.js                   # Модификатор type блока input в технологии Javascript
        input__clear.js                        # Опциональный элемент блока input
        input.css
        input.js
        popup.css
        popup.js
        popup.png
```

### Flex

Существует несколько способов использования схемы Flex:  

#### Способ 1

Основные особенности:

* Блоку соответствует отдельная директория.
* Элементы и модификаторы реализованы в отдельных файлах.

```files
project
    common.blocks/
        input/                                 # Директория блока input
            input_type_search.css
            input_type_search.js
            input__clear.css
            input.css
            input.js
        popup/                                 # Директория блока popup
```

#### Способ 2

Особенности:

* Блоку соответствует отдельная директория.
* Элементы и модификаторы реализованы в файлах блока.

```files
project
    common.blocks/
        input/                                 # Директория блока input
            input.css                          # Реализация блока, его элементов и модификаторов в технологии CSS
            input.js                           # Реализация блока, его элементов и модификаторов в технологии JavaScript
        popup/
```

#### Способ 3

Особенности:

* Директории для блоков не используются.
* Элементы и модификаторы реализованы в файлах блока.

```files
project
    common.blocks/
        input.css                              # Реализация блока, его элементов и модификаторов в технологии CSS
        input.js                               # Реализация блока, его элементов и модификаторов в технологии JavaScript
        popup.css
        popup.js
```
