# Организация файловой структуры

Принятый в методологии БЭМ компонентный подход применяется к организации файловой структуры БЭМ-проектов. Интерфейс делится на независимые компоненты — [блоки](../key-concepts/key-concepts.ru.md#Блок), и [реализация блоков](../key-concepts/key-concepts.ru.md#Реализация-блока) делится на независимые части — файлы. То, как эти файлы хранить и использовать определяют [основне принципы организации файловой структуры БЭМ-проекта](#).

Реализация блока разделена на файлы для удобства работы человека с кодом. Человек создает и вносит правки в отдельные файлы технологий, которые собираются и оптимизируются перед отправкой в браузер. 

> [Подробнее](../build/build.ru.md) про сборку БЭМ-проекта.

Файловая стуктура проекта, организованная по БЭМ-методологии позволяет:

* **Подключать только необходимые БЭМ-сущности в проект**  
  Блоки реализованы независимо. Это позволяет настраивать сборку так, чтобы в проект попадали только нужные блоки.

* Доопределять и переопределять блоки  
  Изменение блока не требует его копирования на уровень проекта. Достаточно создать требуемый файл с правками или новым кодом на другом уровне переопределения и подключить в сборку.

* Улучшить навигацию по проекту  
  Структура всех БЭМ-проектов построена по единому принципу. Имена блоков уникальны. Это позволяет разработчикам быстро ориентироваться в разных частях проекта и находить нужные файлы.

* Ускорить разработку и отладку проекта  
  Реализация блоков разделена по отдельным файлам. При переносе блока из проекта в проект достаточно скопировать нужные файлы или директории.
  Вынесение общей реализации для всех платформ на отдельный уровень позволяет избежать дублирования кода и сократить время на отладку проекта.
  Разделение проекта на уровни позволяет изменять блоки, не затрагивая их исходную реализацию. код библиотеки. При обновлении библиотеки модификация блоков сохраняется на другом уровне проекта.

## Приципы организации файловой стуктуры БЭМ-проекта 

Хранение кода в БЭМ-проекте подчиняется основным приципам организации файловой стуктуры: 

* [Реализация блока разделяется на отдельные файлы](#Реализация-блока-разделяется-на-отдельные-файлы)
* [Файлы объединяются по смыслу, а не по типу](#Файлы-объединяются-по-смыслу-а-не-по-типу)
* [Реализация модификаторов и опциональных элементов находится в отдельных файлах](#Опциональные-элементы-и-модификаторы-выносятся-в-отдельные-файлы)
* [Проект состоит из уровней переопределения](#Проект-разделяется-на-уровни-переопределения)

### Реализация блока разделяется на отдельные файлы

Набор файлов блока определяется технологиями, которые используются для реализации этого блока. Каждой [технологии реализации](../key-concepts/key-concepts.ru.md#Технология-реализации) соответствует отдельный файл. 

Набор файлов блока может меняться. 

**Пример**

```files
project
    common.blocks/
        input/
            input.css                          # Реализация блока `input` в технологии CSS
            input.js                           # Реализация блока `input` в технологии JavaScript
```

### Файлы объединяются по смыслу, а не по типу

Имя блока в БЭМ-проекте уникально. Имена блока и его файлов реализаций совпадают. Таким образом файлы блока группируются с помощью общих [правил именования](../naming-convention/naming-convention.ru.md) БЭМ-сущностей. Для удобства работы файлы могут быть объединены в директорию блока.

**Пример**

```files
project
    common.blocks/
        input/                                 # Директория блока input
            input.css                          # Реализация блока input в технологии CSS
            input.js                           # Реализация блока input в технологии JavaScript
        popup/                                 # Директория блока popup
            popup.css                          # Реализация блока popup в технологии CSS 
            popup.js                           # Реализация блока popup в технологии JavaScript
```

### Код модификаторов и опциональных элементов хранится в отдельных файлах

Опциональные элементы и модификаторы хранятся в файловой системе независимо от самих файлов блока. При сборке используются только те модификаторы и элементы, которые необходимы для данной реализации блока. 

**Пример**

```files
project
    common.blocks/
        input/                                 # Директория блока input
            input.css                          # Реализация блока input в технологии CSS
            input.js                           # Реализация блока input в технологии JavaScript
            input_theme_sun.css                # Реализация модификатора theme в значении sun
            input__clear.css                   # Реализация элемента clear в технологии CSS
            input__clear.js                    # Реализация элемента clear в технологии JavaScript
``` 

### Проект состоит из уровней переопределения

БЭМ-проект всегда состоит из [уровней переопределения](../key-concepts/key-concepts.ru.md#Уровень-переопределения). Блоки с любого уровня могут использоваться в проекте без изменений или изменяться (переопределяться и доопределяться) под требования проекта на другом уровне переопределения. 

Использование уровней переопределения позволяет: 
* Подключать новые блоки в проект
* Изменять конечную реализацию блока, не меняя исходной и не копируя код блока на другой уровень
* Разделять проект на платформы
* Легко обновлять библиотеки блоков, подключенные в проект
* Использовать общие блоки для разработки разных проектов
* Менять темы оформления, не затрагивая логику работы проекта
* Проводить эксперименты в рабочем проекте

**Пример**

```files
project/
    common.blocks/                             # уровень переопределения с блоками проекта
        header/
        logo/
    library.blocks/                            # уровень переопределения c блоками библиотеки
        button/                                # блок button
```

## Примеры схем файловых структур БЭМ-проекта

Существует несколько официально принятых схем организации файловой структуры БЭМ-проектов. Выбор схемы зависит от личных предпочтений разработчика. 

### Nested

Основные особенности:

* Блоку соответствует директория в файловой структуре.
* Модификаторы и опциональные элементы реализованы в отдельных файлах и хранятся в поддиректориях блока с соответствующими именами.
* Имя директории элемента начинается с двух подчеркиваний `__`.
* Имя директории модификатора начинается с одного подчеркивания `_`. 

**Пример**

```files
project
    common.blocks/
        input/
            _type/                             # Директория модификатора type
                input_type_search.css          # Реализация модификатора type со значением search в технологии CSS
            __box/                             # Директория элемента box
                input__box.css
            __clear/                           # Директория элемента clear
                _visible/                      # Директория модификатора visible
                    input__clear_visible.css   # Реализация модификатора visible со значением true в технологии CSS
                input__clear.css
                input__clear.js
            input.css
            input.js
```

* Общий код, необходимый для реализации разных значений модификатора, хранится в отдельном файле без указания значения модификатора в имени.

**Пример**

```files
project
    common.blocks/
        input/
        popup/
            _target/
                popup_target.css               # Общий код модификатора target
                popup_target_anchor.css        # Модификатор target в значении anchor
                popup_target_position.css      # Модификатор target в значении position
        popup.css
        popup.js
```

#### Примеры из жизни

Схема Nested используется для организации файловой структуры БЭМ-библиотек:

* [bem-core](https://github.com/bem/bem-core/tree/v4.2.1/common.blocks/page)
* [bem-components](https://github.com/bem/bem-components/tree/v6.0.0/common.blocks/button)

### Flat

Основные особенности:

* Директории для блоков не используются.
* Опциональные элементы и модификаторы реализованы в отдельных файлах.

```files
project
    common.blocks/
        input_type_search.css                  # Модификатор type блока input в технологии CSS
        input_type_search.js                   # Модификатор type блока input в технологии Javascript
        input__clear.js                        # Опциональный элемент блока input
        input.css
        input.js
        popup.css
        popup.js
        popup.png
```

### Flex

Существует несколько способов использования схемы Flex:  

#### Способ 1

Основные особенности:

* Блоку соответствует отдельная директория.
* Элементы и модификаторы реализованы в отдельных файлах.

  ```files
project
    common.blocks/
        input/                                 # Директория блока input
            input_type_search.css
            input_type_search.js
            input__clear.css
            input.css
            input.js
        popup/                                 # Директория блока popup
```

#### Способ 2

Основные особенности:

* Блоку соответствует отдельная директория.
* Элементы и модификаторы реализованы в файлах блока.

```files
project
    common.blocks/
        input/                                 # Директория блока input
            input.css                          # Реализация блока, его элементов и модификаторов в технологии CSS
            input.js                           # Реализация блока, его элементов и модификаторов в технологии JavaScript
        popup/
```

#### Способ 3

Основные особенности:

* Директории для блоков не используются.
* Элементы и модификаторы реализованы в файлах блока.

```files
project
    common.blocks/
        input.css                              # Реализация блока, его элементов и модификаторов в технологии CSS
        input.js                               # Реализация блока, его элементов и модификаторов в технологии JavaScript
        popup.css
        popup.js
```
