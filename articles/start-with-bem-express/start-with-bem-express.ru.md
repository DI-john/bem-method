# Создаем динамический проект на БЭМ

* [Обзор](#Обзор)
* [Перед началом работы](#Перед-началом-работы)
* [Настройка окружения](#Настройка-окружения)
* [Создание репозитория проекта](#Создание-репозитория-проекта)
* [Файловая структура проекта](#Файловая-структура-проекта)
* [Верстка](#)
  * [Основные блоки](#)
  * [Создание блока](#Создание-блока)
  * [Переопределение библиотечных блоков](Переопределение-библиотечных-блоков)
  * [Создание кастомных блоков](Создание-кастомных-блоков)
* [Устранение неполадок](#Устранение-неполадок)

## Обзор

Этот документ посвящен созданию динамических приложений с использованием [БЭМ-платформы](https://ru.bem.info/platform/). После прочтения вы сможете быстро и с небольшими усилиями разрабатывать собственные веб-приложения, ориентированные на динамические данные.

Мы создадим проект ([Social Search Robot](#)), используя:

* принципы работы с [CSS по БЭМ](../../method/bem-for-css/bem-for-css.ru.md);
* фреймворк [i-bem.js](https://ru.bem.info/platform/i-bem/);
* технологию для описания зависимостей [DEPS](https://ru.bem.info/platform/deps/);
* шаблонизаторы [BEMHTML, BEMTREE](https://ru.bem.info/platform/bem-xjst/).

### Демонстрация

![Social Search Robot](ssr.png)

## Перед началом работы

Документ предназначен для веб-разработчиков знакомых с:

* HTML;
* CSS;
* JavaScript;
* БЭМ.

## Настройка окружения

Для начала работы необходимо установить:

* [Node.js 4.0+](http://nodejs.org/);
* [Git Bash](https://git-for-windows.github.io/) — для пользователей операционной системы Windows.

## Создание репозитория проекта

Оптимальный путь создать динамический проект на БЭМ — использовать шаблонный репозиторий [bem-express](https://github.com/bem/bem-express). Он содержит необходимый минимум конфигурационных файлов, пакетов и позволяет быстро развернуть свой проект.

Нам понадобится локальная копия `bem-express`. Её можно сделать любым удобным для вас способом. Мы будем использовать Git.

> **Примечание** Пользователям Windows необходимо выполнять все команды в Git Bash. Убедитесь, что Git Bash запущен от имени администратора.

1. Клонируем репозиторий:

  ```bash
  git clone https://github.com/bem/bem-express test-project
  ```

2. Переходим в директорию проекта:

  ```bash
  cd test-project
  ```

3. Удаляем историю версионирования исходного репозитория:

  ```bash
  rm -rf .git
  ```

4. Инициализируем собственный репозиторий в директории проекта:

  ```bash
  git init
  ```

5. Устанавливаем зависимости:

  ```bash
  npm install
  ```

  > **Примечание** Не используйте права суперпользователя (`root`) при установке npm- и bower-зависимостей. Bower-зависимости ставятся при выполнении `npm postinstall` в директории `libs`.

6. Собираем проект с помощью [ENB](https://ru.bem.info/toolbox/enb/):

  ```bash
  ./node_modules/.bin/enb make
  ```

  > **Примечание** Конфигурация процесса сборки хранится в файле `.enb/make.js`. На её основе ENB подключает все технологии, которые составляют реализацию блоков: шаблоны, зависимости, CSS-правила и JavaScript-функциональность.

7. Запускаем сервер:

  ```bash
  npm start
  ```

  В результате вы увидите следующее сообщение:

  `Server is listening on 3000`

  На вашем компьютере запустился ENB-сервер — инструмент для разработки, который при обновлении страницы в браузере будет автоматически пересобирать только ту часть проекта, которую затронули ваши изменения. Результат доступен по ссылке: [http://localhost:3000](http://localhost:3000).

  > **Примечание** Если порт 3000 уже используется другой программой, его можно переназначить в файле `server/config.js`. Например, на `8000`.

  ```js
  module.exports = {
      staticFolder: 'static',
      defaultPort: 8000,
      cacheTTL: 80000,
      sessionSecret: 'REPLACE_ME_WITH_RANDOM_STRING'
  };
  ```

## Фйловая структура проекта

```files
.enb/                 # Конфигурационные файлы для сборщика ENB
common.blocks/        # Базовые реализации блоков
desktop.bundles/      # Директории страниц проекта
development.blocks/   # Блоки, находящиеся в разработке (не для Production)  
libs/                 # Библиотеки
node_modules/         # Пакеты
server/               #
static/               #
.borschik             #
.bowerrc              #
.gitignore            # Служебный файл для указания в нём файлов и папок,
                      # которые необходимо скрыть от системы контроля версий git.
README.md             # Текстовое описание проекта
bower.json            # Файл-манифест для менеджера пакетов Bower
nodemon.json          #
package.json          # Описание проекта для npm
```

## Верстка

Перед тем, как мы начнем писать код, нужно составить план. Из каких блоков будет состоять проект?

### Основные блоки





## Устранение неполадок

Если ваш код не работает:

* Ищите опечатки. Помните, что язык JavaScript чувствителен к регистру символов.
* Используйте для выявления проблем отладчик JavaScript, например, отладчик в составе набора инструментов Яндекс.Браузера. Начните поиск ошибок в консоли JavaScript.
* Проверьте все ли зависимости указаны.
* Ознакомьтесь с нашим [примером реализации](#).
* Задавайте вопросы на [форуме](https://ru.bem.info/forum/).
